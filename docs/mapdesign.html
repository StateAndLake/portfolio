<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.550">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Elizabeth Miller - Map Design</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Elizabeth Miller</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./resume.html"> 
<span class="menu-text">Resume</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-mapping-and-data-analysis" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Mapping and Data Analysis</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-mapping-and-data-analysis">    
        <li>
    <a class="dropdown-item" href="./upp462.html">
 <span class="dropdown-text">GIS Approach to Site Selection for Affordable Housing</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./finalproj.html">
 <span class="dropdown-text">Anticipating Climate Migration</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./networkanalyst.html">
 <span class="dropdown-text">Network Analyst: Hospital Access in Cook County</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./spatialanalyst.html">
 <span class="dropdown-text">Spatial Analyst: Grocery Store Access and Food Security Indicators</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./mapdesign.html">
 <span class="dropdown-text">Map Design</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./capstone.html">
 <span class="dropdown-text">Greenway Access in Mecklenburg County</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-urban-design" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Urban Design</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-urban-design">    
        <li>
    <a class="dropdown-item" href="./nicollet.html">
 <span class="dropdown-text">New Nicollet Redevelopment</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./imd.html">
 <span class="dropdown-text">Illinois Medical District</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./encuentro.html">
 <span class="dropdown-text">Encuentro Square Park</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-writing" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Writing</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-writing">    
        <li>
    <a class="dropdown-item" href="./evanston.html">
 <span class="dropdown-text">Evanston, IL: Community Profile</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./lfnc.html">
 <span class="dropdown-text">Lead for North Carolina Blog Post</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-animation" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Animation</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-animation">    
        <li>
    <a class="dropdown-item" href="./urbanrenewal.html">
 <span class="dropdown-text">Visualizing Urban Renewal</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./gifs.html">
 <span class="dropdown-text">Digital Art</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#illinois-medical-district" id="toc-illinois-medical-district" class="nav-link active" data-scroll-target="#illinois-medical-district">Illinois Medical District</a>
  <ul class="collapse">
  <li><a href="#land-use-in-the-imd" id="toc-land-use-in-the-imd" class="nav-link" data-scroll-target="#land-use-in-the-imd">Land Use in the IMD</a></li>
  <li><a href="#transit-routes-in-the-imd" id="toc-transit-routes-in-the-imd" class="nav-link" data-scroll-target="#transit-routes-in-the-imd">Transit Routes in the IMD</a></li>
  </ul></li>
  <li><a href="#new-nicollet" id="toc-new-nicollet" class="nav-link" data-scroll-target="#new-nicollet">New Nicollet</a>
  <ul class="collapse">
  <li><a href="#park-access" id="toc-park-access" class="nav-link" data-scroll-target="#park-access">Park Access</a></li>
  <li><a href="#bluespots" id="toc-bluespots" class="nav-link" data-scroll-target="#bluespots">Bluespots</a></li>
  <li><a href="#transit-around-the-site" id="toc-transit-around-the-site" class="nav-link" data-scroll-target="#transit-around-the-site">Transit Around the Site</a></li>
  </ul></li>
  <li><a href="#armitage-avenue-corridor" id="toc-armitage-avenue-corridor" class="nav-link" data-scroll-target="#armitage-avenue-corridor">Armitage Avenue Corridor</a>
  <ul class="collapse">
  <li><a href="#activity-map" id="toc-activity-map" class="nav-link" data-scroll-target="#activity-map">Activity Map</a></li>
  <li><a href="#traffic-flows" id="toc-traffic-flows" class="nav-link" data-scroll-target="#traffic-flows">Traffic Flows</a></li>
  <li><a href="#land-use-along-the-corridor" id="toc-land-use-along-the-corridor" class="nav-link" data-scroll-target="#land-use-along-the-corridor">Land Use Along the Corridor</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Map Design</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p><em>I created most of these maps in ArcGIS Pro and processed them in Illustrator for projects throughout my masterâ€™s of urban planning and policy program.</em></p>
<section id="illinois-medical-district" class="level1">
<h1>Illinois Medical District</h1>
<p>In spring 2023, I was part of a studio course to devise a plan for the Illinois Medical District (IMD). I produced both of the following maps as part of our existing conditions research on the district.</p>
<section id="land-use-in-the-imd" class="level3">
<h3 class="anchored" data-anchor-id="land-use-in-the-imd">Land Use in the IMD</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/landuse_FINAL_landusemap.png" class="img-fluid figure-img"></p>
<figcaption>Land use map of the Illinois Medical District, 2023. Data source: Chicago Metropolitan Agency for Planning 2018 Land Use Inventory (with manual updates)</figcaption>
</figure>
</div>
<p>This land use map demonstrates the paucity of green space in the district and the significant share of land dedicated to parking.</p>
</section>
<section id="transit-routes-in-the-imd" class="level3">
<h3 class="anchored" data-anchor-id="transit-routes-in-the-imd">Transit Routes in the IMD</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/transit_imdIfinal.png" class="img-fluid figure-img"></p>
<figcaption>Transit routes and ridership in the Illinois Medical District, 2023</figcaption>
</figure>
</div>
<p>This map is a creative approach to communicate both what transit routes exist in the district and the popularity of these routes. The thickness of the lines for the routes is proportionate to the routesâ€™ ridership counts.</p>
</section>
</section>
<section id="new-nicollet" class="level1">
<h1>New Nicollet</h1>
<p>I created these maps for a group submission to the 2024 American Planning Association National Student Planning and Design Competition. My group placed as a top three finalist, and we will compete in a final round involving a presentation at the National Planning Conference in April 2024.</p>
<p>These maps were critical to our existing conditions report and identification of challenges to overcome and strengths to leverage.</p>
<section id="park-access" class="level3">
<h3 class="anchored" data-anchor-id="park-access">Park Access</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/parks_ECR_nobuildings-01.png" class="img-fluid figure-img"></p>
<figcaption>Park access from former Kmart Site. Data source: Open Minneapolis</figcaption>
</figure>
</div>
<p>Despite high levels of park access across Minneapolis, there are few parks accessible by walking or rolling from the site. Those that are accessible are small in size.</p>
</section>
<section id="bluespots" class="level3">
<h3 class="anchored" data-anchor-id="bluespots">Bluespots</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/flood_pixely_draft.png" class="img-fluid figure-img"></p>
<figcaption>Bluespots around the former Kmart site. Data source: Metropolitan Council</figcaption>
</figure>
</div>
<p>Identifying bluespots, or areas where water is most likely to pool in heavy rain events, informed our site plan layout. We sited more permeable surfaces in these existing bluespots.</p>
</section>
<section id="transit-around-the-site" class="level3">
<h3 class="anchored" data-anchor-id="transit-around-the-site">Transit Around the Site</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/transit_draft.png" class="img-fluid figure-img"></p>
<figcaption>Transit availability around the site. Data source: Minnesota Geospatial Commons / Metropolitan Council</figcaption>
</figure>
</div>
<p>Access to numerous transit routes, including one existing and one future bus rapid transit line, is a major strength of area.</p>
</section>
</section>
<section id="armitage-avenue-corridor" class="level1">
<h1>Armitage Avenue Corridor</h1>
<p>These maps were produced from an informal study of the Armitage Avenue corridor in Logan Square during fall 2023 for a course on spatial planning. Some maps rely on underlying quantitative data, and some draw from my own experiences observing and participating in corridor activities.</p>
<section id="activity-map" class="level3">
<h3 class="anchored" data-anchor-id="activity-map">Activity Map</h3>
<p><img src="images/activitymap-01.png" class="img-fluid"></p>
<p>Unlike other maps on this page, this map originated in SketchUp and was processed in Illustrator. Activities were identified through participant observation along the corridor.</p>
</section>
<section id="traffic-flows" class="level3">
<h3 class="anchored" data-anchor-id="traffic-flows">Traffic Flows</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/trafficflow.png" class="img-fluid figure-img"></p>
<figcaption>Data source: Illinois Department of Transportation Average Annual Daily Traffic</figcaption>
</figure>
</div>
<p>The corridor sees lower average annual daily vehicle users than nearby corridors.</p>
</section>
<section id="land-use-along-the-corridor" class="level3">
<h3 class="anchored" data-anchor-id="land-use-along-the-corridor">Land Use Along the Corridor</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/spatial blobfinal-01.png" class="img-fluid figure-img"></p>
<figcaption>Data source: Chicago Metropolitan Agency for Planning 2018 Land Use Inventory</figcaption>
</figure>
</div>
<p>This map is a playful take on a land use map and was created by roughly tracing over a feature class of land uses along the corridor.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>